"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SVGAssetManager = void 0;
// scripts/svgAssetManager.ts
const cc_1 = require("cc");
const SVGAssets_1 = require("../SVGAssets");
class SVGAssetManager {
    /**
     * 初始化自定义资源系统
     */
    static init() {
        // 确保只初始化一次
        if (this._initialized)
            return;
        // 初始化下载器和解析器
        // 需要在适当的时机调用 CustomFileDownloader.init() 和 CustomFileParser.init()
        this._initialized = true;
        console.log("svgAssetManager initialized");
    }
    /**
     * 加载自定义文件（通用接口）
     */
    static loadSVGFile(urlOrUuids, options = {}) {
        return new Promise((resolve, reject) => {
            const requestOptions = Object.assign({ ext: ".svg" }, options);
            // 添加自定义元数据
            if (options.metadata) {
                requestOptions.metadata = options.metadata;
            }
            cc_1.assetManager.loadAny(urlOrUuids, (err, data) => {
                if (err) {
                    reject(err);
                }
                else {
                    resolve(data);
                }
            });
        });
    }
    /**
     * 从远程加载自定义文件
     */
    static loadRemoteCustomFile(url, options = {}) {
        return new Promise((resolve, reject) => {
            cc_1.assetManager.loadRemote(url, Object.assign({ ext: ".svg" }, options), (err, asset) => {
                if (err) {
                    reject(err);
                }
                else if (!asset) {
                    reject(new Error("Asset is null"));
                }
                else {
                    resolve(asset);
                }
            });
        });
    }
    /**
     * 保存自定义资源
     */
    static async savesvgAsset(asset, options = {}) {
        if (!(0, cc_1.isValid)(asset)) {
            throw new Error("Invalid asset");
        }
        // 生成数据字符串
        const dataStr = asset.svgContent;
        // 如果需要下载文件
        if (options.download) {
            return this.downloadFile(dataStr, options.filename || "custom-asset.svg");
        }
        // 否则返回数据字符串
        return dataStr;
    }
    /**
     * 下载文件到本地
     */
    static downloadFile(data, filename) {
        if (typeof window === "undefined")
            return;
        const blob = new Blob([data], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        setTimeout(() => {
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }, 100);
    }
    /**
     * 释放自定义资源
     */
    static releasesvgAsset(asset) {
        if (asset && (0, cc_1.isValid)(asset)) {
            cc_1.assetManager.releaseAsset(asset);
        }
    }
    /**
     * 获取所有已加载的自定义资源
     */
    static getLoadedsvgAssets() {
        const assets = [];
        // 遍历所有已加载的资源
        cc_1.assetManager.assets.forEach((asset) => {
            if (asset instanceof SVGAssets_1.SVGAsset) {
                assets.push(asset);
            }
        });
        return assets;
    }
    /**
     * 检查资源是否已加载
     */
    static isAssetLoaded(uuidOrUrl) {
        return cc_1.assetManager.assets.has(uuidOrUrl);
    }
}
exports.SVGAssetManager = SVGAssetManager;
SVGAssetManager._initialized = false;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc291cmNlL2RyYWZ0L2Fzc2V0TWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2QkFBNkI7QUFDN0IsMkJBQXdEO0FBQ3hELDRDQUF3QztBQUV4QyxNQUFhLGVBQWU7SUFDeEI7O09BRUc7SUFDSCxNQUFNLENBQUMsSUFBSTtRQUNQLFdBQVc7UUFDWCxJQUFJLElBQUksQ0FBQyxZQUFZO1lBQUUsT0FBTztRQUU5QixhQUFhO1FBQ2IsbUVBQW1FO1FBRW5FLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBSUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsV0FBVyxDQUNkLFVBQW9CLEVBQ3BCLFVBR0ksRUFBRTtRQUVOLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDbkMsTUFBTSxjQUFjLG1CQUNoQixHQUFHLEVBQUUsTUFBTSxJQUNSLE9BQU8sQ0FDYixDQUFDO1lBRUYsV0FBVztZQUNYLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUNuQixjQUFjLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDL0MsQ0FBQztZQUVELGlCQUFZLENBQUMsT0FBTyxDQUFJLFVBQVUsRUFBRSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsRUFBRTtnQkFDOUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztvQkFDTixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2hCLENBQUM7cUJBQU0sQ0FBQztvQkFDSixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2xCLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVEOztPQUVHO0lB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QzVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkIsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLGFBQWEsQ0FBQyxTQUFpQjtRQUNsQyxPQUFPLGlCQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM5QyxDQUFDOztBQTNKTCwwQ0E0SkM7QUE3SWtCLDRCQUFZLEdBQUcsS0FBSyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc2NyaXB0cy9zdmdBc3NldE1hbmFnZXIudHNcclxuaW1wb3J0IHsgYXNzZXRNYW5hZ2VyLCBBc3NldCwgTm9kZSwgaXNWYWxpZCB9IGZyb20gXCJjY1wiO1xyXG5pbXBvcnQgeyBTVkdBc3NldCB9IGZyb20gXCIuLi9TVkdBc3NldHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTVkdBc3NldE1hbmFnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJboh6rlrprkuYnotYTmupDns7vnu59cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGluaXQoKSB7XHJcbiAgICAgICAgLy8g56Gu5L+d5Y+q5Yid5aeL5YyW5LiA5qyhXHJcbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxpemVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIOWIneWni+WMluS4i+i9veWZqOWSjOino+aekOWZqFxyXG4gICAgICAgIC8vIOmcgOimgeWcqOmAguW9k+eahOaXtuacuuiwg+eUqCBDdXN0b21GaWxlRG93bmxvYWRlci5pbml0KCkg5ZKMIEN1c3RvbUZpbGVQYXJzZXIuaW5pdCgpXHJcblxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInN2Z0Fzc2V0TWFuYWdlciBpbml0aWFsaXplZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBfaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWKoOi9veiHquWumuS5ieaWh+S7tu+8iOmAmueUqOaOpeWPo++8iVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbG9hZFNWR0ZpbGU8VCBleHRlbmRzIFNWR0Fzc2V0PihcclxuICAgICAgICB1cmxPclV1aWRzOiBzdHJpbmdbXSxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIHR5cGU/OiBhbnk7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhPzogYW55O1xyXG4gICAgICAgIH0gPSB7fVxyXG4gICAgKTogUHJvbWlzZTxUW10+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9uczogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgZXh0OiBcIi5zdmdcIixcclxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDmt7vliqDoh6rlrprkuYnlhYPmlbDmja5cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLm1ldGFkYXRhID0gb3B0aW9ucy5tZXRhZGF0YTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYXNzZXRNYW5hZ2VyLmxvYWRBbnk8VD4odXJsT3JVdWlkcywgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOS7jui/nOeoi+WKoOi9veiHquWumuS5ieaWh+S7tlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbG9hZFJlbW90ZUN1c3RvbUZpbGU8VCBleHRlbmRzIFNWR0Fzc2V0PihcclxuICAgICAgICB1cmw6IHN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M/OiAocHJvZ3Jlc3M6IG51bWJlcikgPT4gdm9pZDtcclxuICAgICAgICAgICAgbWV0YWRhdGE/OiBhbnk7XHJcbiAgICAgICAgfSA9IHt9XHJcbiAgICApOiBQcm9taXNlPFQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBhc3NldE1hbmFnZXIubG9hZFJlbW90ZTxUPihcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBleHQ6IFwiLnN2Z1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKGVyciwgYXNzZXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFzc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBc3NldCBpcyBudWxsXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGFzc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDkv53lrZjoh6rlrprkuYnotYTmupBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIHNhdmVzdmdBc3NldChcclxuICAgICAgICBhc3NldDogU1ZHQXNzZXQsXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICBmaWxlbmFtZT86IHN0cmluZztcclxuICAgICAgICAgICAgZG93bmxvYWQ/OiBib29sZWFuO1xyXG4gICAgICAgIH0gPSB7fVxyXG4gICAgKTogUHJvbWlzZTxzdHJpbmcgfCB2b2lkPiB7XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkKGFzc2V0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFzc2V0XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g55Sf5oiQ5pWw5o2u5a2X56ym5LiyXHJcbiAgICAgICAgY29uc3QgZGF0YVN0ciA9IGFzc2V0LnN2Z0NvbnRlbnQ7XHJcblxyXG4gICAgICAgIC8vIOWmguaenOmcgOimgeS4i+i9veaWh+S7tlxyXG4gICAgICAgIGlmIChvcHRpb25zLmRvd25sb2FkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvd25sb2FkRmlsZShkYXRhU3RyLCBvcHRpb25zLmZpbGVuYW1lIHx8IFwiY3VzdG9tLWFzc2V0LnN2Z1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWQpuWImei/lOWbnuaVsOaNruWtl+espuS4slxyXG4gICAgICAgIHJldHVybiBkYXRhU3RyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5LiL6L295paH5Lu25Yiw5pys5ZywXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGRvd25sb2FkRmlsZShkYXRhOiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6IFwidGV4dC9wbGFpblwiIH0pO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblxyXG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBhLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgYS5kb3dubG9hZCA9IGZpbGVuYW1lO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7XHJcbiAgICAgICAgYS5jbGljaygpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcclxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDph4rmlL7oh6rlrprkuYnotYTmupBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHJlbGVhc2VzdmdBc3NldChhc3NldDogQXNzZXQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoYXNzZXQgJiYgaXNWYWxpZChhc3NldCkpIHtcclxuICAgICAgICAgICAgYXNzZXRNYW5hZ2VyLnJlbGVhc2VBc3NldChhc3NldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5omA5pyJ5bey5Yqg6L2955qE6Ieq5a6a5LmJ6LWE5rqQXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRMb2FkZWRzdmdBc3NldHMoKTogU1ZHQXNzZXRbXSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXRzOiBTVkdBc3NldFtdID0gW107XHJcblxyXG4gICAgICAgIC8vIOmBjeWOhuaJgOacieW3suWKoOi9veeahOi1hOa6kFxyXG4gICAgICAgIGFzc2V0TWFuYWdlci5hc3NldHMuZm9yRWFjaCgoYXNzZXQ6IEFzc2V0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhc3NldCBpbnN0YW5jZW9mIFNWR0Fzc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBhc3NldHMucHVzaChhc3NldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFzc2V0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOajgOafpei1hOa6kOaYr+WQpuW3suWKoOi9vVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaXNBc3NldExvYWRlZCh1dWlkT3JVcmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBhc3NldE1hbmFnZXIuYXNzZXRzLmhhcyh1dWlkT3JVcmwpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==